<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Snippets por linguagem e contexto</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
  <style>
    pre code {
      border: none;
      background: #1e1e1e;
      color: #dcdcdc;
      border-radius: 8px;
      padding: 1rem;
      font-size: 0.95rem;
      display: block;
      overflow-x: auto;
    }
    .section-icon {
      margin-right: 0.5rem;
    }
    .snippet {
      position: relative;
      margin-bottom: 1rem;
    }
    .copy-btn {
      position: absolute;
      bottom: 12px;
      right: 16px;
      z-index: 10;
      border: none;
      background: rgba(0, 0, 0, 0.5);
      color: #fff;
      padding: 5px 10px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    .copy-btn:hover {
      background: #0d6efd;
    }
    summary {
      font-size: 1.1rem;
      cursor: pointer;
      background: #f1f1f1;
      padding: 0.6rem 1rem;
      border-radius: 0.5rem;
      transition: background-color 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      user-select: none;
    }
    details[open] .fade-toggle {
      animation: fadeIn 0.4s ease-in-out forwards;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scaleY(0.95); }
      to { opacity: 1; transform: scaleY(1); }
    }
    .snippet-toggle {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      cursor: pointer;
      user-select: none;
      margin-bottom: 0.5rem;
      font-weight: 600;
    }
    .snippet-content {
      display: none;
      animation: fadeIn 0.4s ease-in-out forwards;
    }
    .snippet.open .snippet-content {
      display: block;
    }
    .toggle-all-btn {
      display: inline-block;
      margin: 10px 0;
      cursor: pointer;
      font-weight: 600;
      color: #0d6efd;
      user-select: none;
    }
  </style>
</head>
<body class="bg-light text-dark p-4">
  <div class="container">
    <h1 class="mb-4">Snippets por linguagem e contexto</h1>

    <div class="mb-3">
      <input type="text" id="search" class="form-control" placeholder="Filtrar snippets..." />
    </div>

    <section class="mb-5" id="bancos-de-dados">
      <h2><i class="fas fa-database section-icon"></i>Bancos de dados</h2>
      <details open>
        <summary><i class="fas fa-compress toggle-icon"></i><strong>Mostrar/ocultar snippets</strong></summary>
        <div class="toggle-all-btn" id="toggle-all-snippets"><i class="fas fa-expand"></i> Mostrar/ocultar todos os snippets</div>
        <div class="mt-3 fade-toggle" id="snippet-list">

          <div class="snippet">
            <div class="snippet-toggle"><i class="fas fa-plus toggle-icon"></i>Abrir/fechar transação:</div>
            <div class="snippet-content">
              <button class="copy-btn"><i class="fas fa-copy"></i></button>
              <pre><code class="language-php">&lt;?php
   TTransaction::open('mini_erp');
   TTransaction::close();
?&gt;</code></pre>
            </div>
          </div>

          <div class="snippet">
            <div class="snippet-toggle"><i class="fas fa-plus toggle-icon"></i>SQL manual:</div>
            <div class="snippet-content">
              <button class="copy-btn"><i class="fas fa-copy"></i></button>
              <pre><code class="language-php">&lt;?php
   $conn = TTransaction::get();
   $result = $conn->query('SELECT id FROM bank ORDER BY id');
   $objects = $result->fetchAll(PDO::FETCH_CLASS, "stdClass");
   if($objects) {
      foreach($objects as $object) {
         echo $object->id;
      }
   }
?&gt;</code></pre>
            </div>
          </div>

        </div>
      </details>
    </section>
  </div>

  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>
  <script>
    $(document).on('click', '.copy-btn', function () {
      const code = $(this).siblings('pre').text();
      navigator.clipboard.writeText(code).then(() => {
        $(this).html('<i class="fas fa-check"></i>');
        setTimeout(() => $(this).html('<i class="fas fa-copy"></i>'), 1500);
      });
    });

    $('#search').on('input', function () {
      const val = $(this).val().toLowerCase();
      $('.snippet').each(function () {
        const content = $(this).text().toLowerCase();
        $(this).toggle(content.includes(val));
      });
    });

    $('details summary').on('click', function () {
      const icon = $(this).find('.toggle-icon');
      const details = $(this).parent()[0];
      setTimeout(() => {
        if (details.open) {
          icon.removeClass('fa-expand').addClass('fa-compress');
        } else {
          icon.removeClass('fa-compress').addClass('fa-expand');
        }
      }, 50);
    });

    $(document).on('click', '.snippet-toggle', function () {
      const snippet = $(this).closest('.snippet');
      snippet.toggleClass('open');
      const icon = $(this).find('.toggle-icon');
      icon.toggleClass('fa-plus fa-minus');
    });

    $(document).on('click', '#toggle-all-snippets', function () {
      const snippets = $('#snippet-list .snippet');
      const anyClosed = snippets.not('.open').length > 0;

      snippets.each(function () {
        const toggle = $(this).find('.snippet-toggle');
        const icon = toggle.find('.toggle-icon');
        if (anyClosed) {
          $(this).addClass('open');
          icon.removeClass('fa-plus').addClass('fa-minus');
        } else {
          $(this).removeClass('open');
          icon.removeClass('fa-minus').addClass('fa-plus');
        }
      });
    });
  </script>
</body>
</html>
